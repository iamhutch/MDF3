<!doctype html> 
<!--
/**
 * @author Lucy Hutcheson
 * Created for:  MDF3 1308
 */
-->
 
<html lang="en">
<head>

	<meta charset="utf-8">
	
    <title>Dining Heart: Add New Dining Place</title>
	
	<!--  Mobile viewport optimized -->
	<meta name="HandheldFriendly" content="True">
	<meta name="MobileOptimized" content="320"/>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	
	
	<!-- StyleSheets under here -->
	<link rel="stylesheet" href="styles.css" />	
	

</head>
<body id="index">
	<div id="home" >
		<header >
			<h3>Add New Dining Heart</h3>
		</header>
		<div class="mainContent">
			<form action="#" method="post" id="addForm">
				<div class="fieldcontain">
					<label for="dining-name">Restaurant Name: <span class="required">*</span></label>
					<input type="text" id="name" placeholder="Your favorite restaurant"/>
				</div>
				<div class="fieldcontain">
					<label for="city">City: <span class="required">*</span></label>
					<input type="text" id="city" placeholder="City of this restaurant"/></li>
				</div> 
				<div id="category-section" class="fieldcontain">
					<label for="categoryLabel">Category: </label>
					<select name="category" id="category" >
						<option data-placeholder="true">--Choose A Category--</option>
							<option value="Asian">Asian</option>
							<option value="American">American</option>
							<option value="Country">Country</option>
							<option value="Burgers/Dogs">Burgers/Dogs</option>
							<option value="Fine Dining">Fine Dining</option>
							<option value="European">European</option>
					</select>
				</div>
				<div id="submit-container" class="fieldcontain">
					<input type="button" id="submit" value="Add New Restaurant" onClick="validateForm()" />	
					<input type="button" id="cancel-button" value="Cancel"  />	
				</div>
				<span id="required"><span class="error">*</span> fields are required.</span>
			</form>
		</div>
	</div>
	
	
	<!-- JavaScript under here -->
    <script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
	<script type="text/javascript">
	
		// VALIDATE FUNCTION
		var validateForm = function() {
			var getName = $("#name").val();
			var getCity = $("#city").val();
	
			//Reset error messages
			$(".error").hide();
			var hasError = false;
			$('#errors').empty();
			$('#name').css("border", "none") ;
			$('#city').css("border", "none") ;
	
			//Get Error messages
			var messageArray = [];
			
			// Name validation
			if(getName === ""){
				$('#name').after('<span class="error">Please enter a restaurant name.</span>');
				$('#name').css("border", "1px solid red") ;
				hasError = true;
			}
			// City validation
			if(getCity === ""){
				$('#city').after('<span class="error">Please enter a city name.</span>');
				$('#city').css("border", "1px solid red") ;
				hasError = true;
			}
						
			//Set Errors
			if(hasError === true) {
				$('#submit-container').after('<span class="error">Please correct the errors above.</span>');
				event.preventDefault();
				return false;
			}else{
				//If all is validated, save the data 
				submitHeart(getName, getCity);
			}
		};
		
	    var submitHeart = function(name, city) {
	    	var category = $("#category").val();
	        Native.addHeart(name, city, category);
	    };
	    
	    var cancel = function(cancel) {
	        Native.cancel(cancel);
	    };

		$( "#cancel-button" ).click(function() {
			alert( "Handler for .click() called." );
		  	Native.cancel(cancel);
		});	    
	</script> 

</body>
</html>
